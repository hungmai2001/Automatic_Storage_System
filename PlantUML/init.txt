@startuml
participant ESP32CAM
box #LightBlue 
participant FrontEnd
participant BackEnd
end box 
participant ESP32
!pragma teoz true
ESP32CAM --> ESP32CAM: Tạo websocket server
activate ESP32CAM #20a4d8
& ESP32 --> ESP32: Kết nối MQTT
activate ESP32 #efde27


FrontEnd --> FrontEnd : Nhập IP của ESP32CAM để\nkết nối đến websocket server
activate FrontEnd #DarkSalmon
BackEnd --> BackEnd : Tải hình ảnh từ database
activate BackEnd #ef2731 

!pragma teoz true
BackEnd --> FrontEnd : [MQTT] Gửi số lượng tủ còn trống

& BackEnd --> ESP32: [MQTT] Gửi id các tủ đã dùng

!pragma teoz true
FrontEnd --> FrontEnd : **<color red>Hiển thị nút: LẤY ĐỒ</color>**\n**<color red>và/hoặc GỬI ĐỒ</color>**
activate FrontEnd #005500 
& ESP32 --> ESP32: Cập nhật led tủ
== **<color green>Bắt đầu ứng dụng</color>** == 

@enduml